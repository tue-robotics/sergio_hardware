########################################################################
#                                                                      #
# Simple Open EtherCAT Master (SOEM) deployer file 				   	   #
#                                                                      #
########################################################################

#### DECLARATION OF PARAMETERS ####
var double 	Ts = 0.001
var int	data_size = 120*1000;
var string fileout = "/home/amigo/ros/data/private/Ton_data/torso_identification/sine_01.dat"


### TRACING COMPONENT ###
loadComponent("Tracing","Signal::Tracing")
setActivity("Tracing",0.0,HighestPriority,ORO_SCHED_RT)
#addPeer("Supervisor","Tracing")
Tracing.vector_sizes = array (2.0, 2.0, 2.0) 
Tracing.buffersize = data_size;
Tracing.filename = fileout;
Tracing.Ts = Ts
Tracing.configure


connect ("TORSO_ReferenceGenerator.posout",	    "Tracing.in1", ConnPolicy() );
connect ("TORSO_Controller.out",	    "Tracing.in2", ConnPolicy() );
connect ("TORSO_ReadEncoders.out",	    "Tracing.in3", ConnPolicy() );

### Loading Components ###
### SOURCES ###
loadComponent("TORSO_Sine","SOURCES::SineWave")
#addPeer("Supervisor","TORSO_Sine")
setActivity("TORSO_Sine",Ts,HighestPriority,ORO_SCHED_RT)
TORSO_Sine.frequency    = array(0.1, 0.1);
TORSO_Sine.amplitude    = array(0.00000000001, 0.01);
TORSO_Sine.phase        = array(0.0, 0.0);
TORSO_Sine.bias         = array(0.380, 0.440);
TORSO_Sine.vector_size  = 2;
TORSO_Sine.configure

connect ("TORSO_Sine.out",     "TORSO_ReferenceGenerator.posin1",        ConnPolicy() ); # RefGoal

### Loading Components ###
### SOURCES ###
loadComponent("TORSO_Const","SOURCES::SineWave")
#addPeer("Supervisor","TORSO_Sine")
setActivity("TORSO_Sine",Ts,HighestPriority,ORO_SCHED_RT)
TORSO_Sine.frequency    = array(0.1, 0.1);
TORSO_Sine.amplitude    = array(0.00000000001, 0.01);
TORSO_Sine.phase        = array(0.0, 0.0);
TORSO_Sine.bias         = array(0.380, 0.440);
TORSO_Sine.vector_size  = 2;
TORSO_Sine.configure
